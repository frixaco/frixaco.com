// @bun
var o=(e)=>JSON.parse(e);var{env:u,serve:d}=globalThis.Bun;var a=o("{\"index\":\"./index.html\",\"files\":[{\"input\":\"index.html\",\"path\":\"./index-y1e0g89h.js\",\"loader\":\"js\",\"isEntry\":true,\"headers\":{\"etag\":\"NzsptgNfsik\",\"content-type\":\"text/javascript;charset=utf-8\"}},{\"input\":\"index.html\",\"path\":\"./index.html\",\"loader\":\"html\",\"isEntry\":true,\"headers\":{\"etag\":\"CBpei6onfXs\",\"content-type\":\"text/html;charset=utf-8\"}}]}");var l=async()=>{let t=await(await fetch("https://api.whatmedoin.frixaco.com/activity")).json(),i=t.date,n=new Date(i),r=new Date;if(Math.abs(n.getTime()-r.getTime())/60000>30)return"AFK";if(t.platform==="browser"){if(["guidetojapanese.org","animelon.com"].some((s)=>t.url.includes(s)))return"learning Japanese";if(["youtube.com"].some((s)=>t.url.includes(s)))if(t.url.includes("list=PLcjQUNxFpwsRJ6a2vO5EeHMkSd4ck7IbS"))return"listening to music";else return"watching YouTube"}if(t.platform==="android")return"on my phone";if(["WezTerm","wezterm-gui","kitty"].includes(t.title))return"inside my terminal (probably neovim-ing)";if(["Cursor","pwsh","Code"].includes(t.title))return"working or making another pet project";if(["Slack"].includes(t.title))return"talking with colleagues";if(["Anki","anki"].includes(t.title))return"learning some Japanese vocabulary";if(["Heptabase","Obsidian"].includes(t.title))return"doing some note taking";if(["osu!"].includes(t.title))return"playing my favorite game - osu!";if(["Blender"].includes(t.title))return"doing some 3D work in Blender";if(["krita"].includes(t.title))return"doing some 2d art using Krita";return"oops, tracker not working, click to report"};console.log(Boolean(u.DEV));var g=d({routes:{"/":a,"/api/activity":async()=>{let e=await l();return Response.json(e)},"/api/notify":async(e)=>{let{message:t}=await e.json(),i=process.env.TG_BOT_TOKEN,n=process.env.TG_CHAT_ID;if(!i||!n)return Response.json({error:"Missing Telegram credentials"},{status:500});try{if(!(await(await fetch(`https://api.telegram.org/bot${i}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:n,text:t})})).json()).ok)return Response.json({error:"Failed to send message"},{status:500});return Response.json({success:!0})}catch(r){return Response.json({error:"Failed to send notification"},{status:500})}}},development:Boolean(u.DEV)});console.log(`Listening on ${g.url}`);
